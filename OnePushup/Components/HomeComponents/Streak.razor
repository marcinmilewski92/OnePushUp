@using OnePushUp.Data
@using OnePushUp.Repositories
@inject TrainingEntryRepository TrainingEntryRepository

<div class="streak-card card mt-4">
    @if (_isLoading)
    {
        <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
            <div class="spinner-border text-light" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    }
    else
    {
        <div class="streak-content">
            <div class="streak-header">
                <h2 class="streak-number @GetStreakColorClass()">@_currentStreak</h2>
                <p class="streak-label">Day Streak</p>
            </div>
            
            <div class="stats-row">
                <div class="stat-item">
                    <p class="stat-number">@_streakTotal</p>
                    <p class="stat-label">Current Streak</p>
                </div>
                <div class="stat-item">
                    <p class="stat-number">@_totalPushups</p>
                    <p class="stat-label">Total Pushups</p>
                </div>
            </div>
            
            @if (_currentStreak > 0)
            {
                <div class="streak-message mt-3">
                    <i class="bi bi-fire me-2"></i> 
                    @if (_currentStreak >= 30)
                    {
                        <span>Incredible! @_currentStreak days is legendary!</span>
                    }
                    else if (_currentStreak >= 14)
                    {
                        <span>Amazing! @_currentStreak days is impressive!</span>
                    }
                    else if (_currentStreak >= 7)
                    {
                        <span>Great job! You've reached @_currentStreak days!</span>
                    }
                    else
                    {
                        <span>Keep going! Your streak is building!</span>
                    }
                </div>
            }
            else
            {
                <div class="streak-message mt-3">
                    <i class="bi bi-lightning-charge me-2"></i> Start your streak today!
                </div>
            }
        </div>
    }
</div>